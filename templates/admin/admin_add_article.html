{% extends 'admin/admin_base.html' %}
{% import 'admin/admin_widgets.html' as widgets %}


{% block title %}发表文章{% endblock %}


{% block css %}
<link rel="stylesheet" href="{{ g.static_url('libs/select2/select2.css') }}">
<link rel="stylesheet" href="{{ g.admin_static('css/add_article.css') }}">
{% endblock %}


{% block libs %}
<script src="{{ g.static_url('libs/jquery.filedrop.js') }}"></script>
<script src="{{ g.static_url('libs/zeroclipboard/zeroclipboard.js') }}"></script>
<script src="{{ g.static_url('libs/jquery.validate.js') }}"></script>
<script src="{{ g.static_url('libs/select2/select2.js') }}"></script>
{% endblock %}


{% block js %}
<script src="{{ g.admin_static('js/add_article.js') }}"></script>
{% endblock %}


{% block content %}
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-picture"></i></span>
                    <h5>插入图片</h5>
                </div>
                <div class="widget-content nopadding">
                    <div id="dropbox" data-swf="{{ g.static_url('libs/zeroclipboard/zeroclipboard.swf') }}">
                        <span class="message">
                            拖放多张图片在此进行上传<br>
                            (支持4M以下的png、bmp、jpg和gif格式的图片)
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-file"></i></span>
                    <h5>发表文章</h5>
                </div>
                <div class="widget-content nopadding">
                    <form id="article-form" action="/admin/article/add" method="post" class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">标题</label>
                            <div class="controls">
                                <input type="text" name="title" autocomplete="off">
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">分类</label>
                            <div class="controls">
                                {{ widgets.classes_select(categories) }}
                                <a href="/admin/classes" class="btn btn-mini tip-right" title="添加分类" target="_blank"><i class="icon-plus"></i> 添加</a>
                                <a class="refresh btn btn-mini hide"><i class="icon-refresh"></i> 刷新</a>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label"></label>
                            <div class="controls">
                                <a href="/admin/editor" target="_blank">使用markdown全屏预览编辑器</a>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">内容</label>
                            <div class="controls">
                                <textarea name="md" rows="15" placeholder="只支持**markdown**格式"></textarea>
                            </div>
                        </div>
                        <div class="form-actions">
                            <input type="submit" class="btn btn-primary" value="发表">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
